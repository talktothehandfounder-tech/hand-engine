<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Hand Engine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* RESET + BASE */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      width: 100%;
      background: #000;
      color: #fff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      overflow: hidden;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #111 0, #000 55%);
    }

    /* CONTAINER */
    .hand-stage {
      position: relative;
      width: min(80vw, 420px);
      height: min(90vh, 640px);
      display: flex;
      align-items: center;
      justify-content: center;
      isolation: isolate;
    }

    /* GLOW BACKDROP */
    .hand-aura {
      position: absolute;
      inset: 0;
      margin: auto;
      width: 120%;
      height: 120%;
      background:
        radial-gradient(circle at 50% 15%, rgba(0, 200, 255, 0.18) 0, transparent 55%),
        radial-gradient(circle at 20% 80%, rgba(0, 120, 255, 0.25) 0, transparent 60%),
        radial-gradient(circle at 80% 80%, rgba(0, 255, 200, 0.18) 0, transparent 60%);
      opacity: 0.7;
      filter: blur(24px);
      z-index: 0;
      pointer-events: none;
    }

    /* HAND WRAPPER */
    .hand-wrapper {
      position: relative;
      z-index: 2;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transform-origin: center center;
      cursor: pointer;
      will-change: transform, filter;
      transition:
        filter 0.3s ease,
        transform 0.18s ease;
    }

    /* THE HAND IMAGE */
    .hand-img {
      display: block;
      max-width: 100%;
      max-height: 100%;
      filter:
        drop-shadow(0 0 10px rgba(0, 150, 255, 0.65))
        drop-shadow(0 0 26px rgba(0, 120, 255, 0.35));
      transform-origin: center center;
    }

    /* BASE ANIMATIONS */
    @keyframes handFloat {
      0%   { transform: translateY(0px); }
      50%  { transform: translateY(-16px); }
      100% { transform: translateY(0px); }
    }

    @keyframes handBreath {
      0%   { transform: scale(1); }
      50%  { transform: scale(1.03); }
      100% { transform: scale(1); }
    }

    @keyframes auraPulse {
      0%   { opacity: 0.55; }
      50%  { opacity: 0.9; }
      100% { opacity: 0.55; }
    }

    /* IDLE STATE */
    .hand-wrapper.idle {
      animation:
        handFloat 4.8s ease-in-out infinite,
        handBreath 6.4s ease-in-out infinite;
    }

    .hand-stage.idle .hand-aura {
      animation: auraPulse 5.6s ease-in-out infinite;
    }

    /* HOVER REACTION (desktop) */
    .hand-wrapper.hovered {
      filter:
        drop-shadow(0 0 16px rgba(0, 220, 255, 0.9))
        drop-shadow(0 0 40px rgba(0, 160, 255, 0.6));
      transform: scale(1.04);
    }

    /* TAP / CLICK POP */
    .hand-wrapper.popped {
      animation:
        handFloat 4.8s ease-in-out infinite,
        handBreath 6.4s ease-in-out infinite,
        handPop 160ms ease-out 1;
    }

    @keyframes handPop {
      0%   { transform: scale(1) translateY(0); }
      40%  { transform: scale(1.08) translateY(-4px); }
      100% { transform: scale(1) translateY(0); }
    }

    /* TALK MODE */
    .hand-stage.talk-mode .hand-aura {
      background:
        radial-gradient(circle at 50% 15%, rgba(0, 255, 180, 0.4) 0, transparent 55%),
        radial-gradient(circle at 20% 80%, rgba(0, 150, 255, 0.5) 0, transparent 60%),
        radial-gradient(circle at 80% 80%, rgba(255, 0, 200, 0.35) 0, transparent 60%);
      animation: auraPulse 2.2s ease-in-out infinite;
    }

    .hand-stage.talk-mode .hand-wrapper {
      filter:
        drop-shadow(0 0 18px rgba(0, 255, 200, 0.95))
        drop-shadow(0 0 44px rgba(100, 200, 255, 0.85));
      transform: scale(1.06);
    }

    /* TALK LABEL */
    .talk-label {
      position: absolute;
      bottom: 8%;
      left: 50%;
      transform: translateX(-50%);
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.78);
      border: 1px solid rgba(0, 255, 200, 0.5);
      color: #bffaf3;
      font-size: 0.72rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 8px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .talk-label-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #00ffd5;
      box-shadow: 0 0 12px rgba(0, 255, 213, 0.9);
      animation: dotPulse 1s ease-in-out infinite;
    }

    @keyframes dotPulse {
      0%   { transform: scale(1); opacity: 0.8; }
      50%  { transform: scale(1.3); opacity: 1; }
      100% { transform: scale(1); opacity: 0.8; }
    }

    .hand-stage.talk-mode .talk-label {
      opacity: 1;
    }

    /* WINK OVERLAY */
    .wink {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0;
      transform: scale(0.9);
      transition:
        opacity 0.18s ease-out,
        transform 0.18s ease-out;
      z-index: 3;
    }

    .wink.visible {
      opacity: 1;
      transform: scale(1);
    }

    .wink-emoji {
      font-size: 4rem;
      filter: drop-shadow(0 0 14px rgba(0, 0, 0, 0.8));
    }

    @media (max-width: 480px) {
      .hand-stage {
        width: 100vw;
        height: 100vh;
      }

      .talk-label {
        bottom: 9%;
        font-size: 0.68rem;
      }

      .wink-emoji {
        font-size: 3.4rem;
      }
    }
  </style>
</head>
<body>
  <div class="hand-stage idle" id="handStage">
    <div class="hand-aura"></div>

    <div class="wink" id="wink">
      <div class="wink-emoji">ðŸ˜‰</div>
    </div>

    <div class="hand-wrapper idle" id="handWrapper">
      <img
        class="hand-img"
        src="https://img1.wsimg.com/isteam/ip/b911d62d-1070-4296-932c-94ed923f1163/BCO.945e866c-a46f-4124-a641-e26733c4b2b5.png/:/rs=w:984,h:1476"
        alt="The Hand"
      />
    </div>

    <div class="talk-label" id="talkLabel">
      <span class="talk-label-dot"></span>
      <span>TALK TO THE HAND</span>
    </div>
  </div>

  <script>
    const handStage = document.getElementById("handStage");
    const handWrapper = document.getElementById("handWrapper");
    const wink = document.getElementById("wink");

    let pressTimer = null;
    let isTalkMode = false;
    let lastTapTime = 0;
    const doubleTapThreshold = 280; // ms

    /* DESKTOP: HOVER EFFECT */
    handWrapper.addEventListener("mouseenter", () => {
      handWrapper.classList.add("hovered");
    });

    handWrapper.addEventListener("mouseleave", () => {
      handWrapper.classList.remove("hovered");
    });

    /* TAP / CLICK POP + DOUBLE TAP DETECTION */
    function triggerPop() {
      handWrapper.classList.remove("popped");
      void handWrapper.offsetWidth; // force reflow to restart animation
      handWrapper.classList.add("popped");
      setTimeout(() => {
        handWrapper.classList.remove("popped");
      }, 200);
    }

    function triggerWink() {
      wink.classList.add("visible");
      setTimeout(() => {
        wink.classList.remove("visible");
      }, 420);
    }

    handWrapper.addEventListener("click", (event) => {
      const now = Date.now();
      const timeSinceLastTap = now - lastTapTime;

      if (timeSinceLastTap <= doubleTapThreshold) {
        // DOUBLE TAP / DOUBLE CLICK â†’ WINK
        triggerWink();
        lastTapTime = 0;
      } else {
        // SINGLE TAP / CLICK â†’ POP
        triggerPop();
        lastTapTime = now;
      }
    });

    /* PRESS & HOLD â†’ TALK MODE */
    function enterTalkMode() {
      if (isTalkMode) return;
      isTalkMode = true;
      handStage.classList.add("talk-mode");
    }

    function exitTalkMode() {
      if (!isTalkMode) return;
      isTalkMode = false;
      handStage.classList.remove("talk-mode");
    }

    function startPressTimer() {
      if (pressTimer) clearTimeout(pressTimer);
      pressTimer = setTimeout(() => {
        enterTalkMode();
      }, 420); // hold threshold
    }

    function clearPressTimer() {
      if (pressTimer) {
        clearTimeout(pressTimer);
        pressTimer = null;
      }
      exitTalkMode();
    }

    /* MOUSE PRESS */
    handWrapper.addEventListener("mousedown", startPressTimer);
    window.addEventListener("mouseup", clearPressTimer);

    /* TOUCH PRESS */
    handWrapper.addEventListener("touchstart", (e) => {
      e.preventDefault();
      startPressTimer();
    }, { passive: false });

    window.addEventListener("touchend", clearPressTimer);
    window.addEventListener("touchcancel", clearPressTimer);
  </script>
</body>
</html>
